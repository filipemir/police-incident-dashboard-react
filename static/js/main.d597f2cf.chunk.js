(window["webpackJsonpbos-criminal-incidence"]=window["webpackJsonpbos-criminal-incidence"]||[]).push([[0],{115:function(e,t,a){},116:function(e,t,a){},117:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(34),i=a.n(o),c=a(17),s=a(9),l=a.n(s),u=a(1),d=a(121),m=a(123),p=a(122),f=(a(44),a(35)),v=a.n(f),h="https://data.boston.gov/api/3/action/datastore_search_sql?sql=",g="YYYY-MM-DD hh:mm";var E=a(125),y=a(124),b=Object(E.a)(y.a).domain(["Firearm Violations","Confidence Games","Larceny From Motor Vehicle","Towed","Property Related Damage","Missing Person Located","Auto Theft Recovery","INVESTIGATE PERSON","Harbor Related Incidents","Service","Harassment","Landlord / Tenant Disputes","Property Found","HUMAN TRAFFICKING","Vandalism","License Violation","Robbery","License Plate Related Incidents","Counterfeiting","Warrant Arrests","Disorderly Conduct","Motor Vehicle Accident Response","Biological Threat","Embezzlement","Ballistics","Prisoner Related Incidents","Other Burglary","Verbal Disputes","Auto Theft","Medical Assistance","Restraining Order Violations","Manslaughter","Larceny","Evading Fare","Aircraft","Drug Violation","Bomb Hoax","Fire Related Reports","HUMAN TRAFFICKING - INVOLUNTARY SERVITUDE","Criminal Harassment","HOME INVASION","Search Warrants","Homicide","Fraud","Prostitution","Explosives","Residential Burglary","Operating Under the Influence","Recovered Stolen Property","Other","Liquor Violation","Commercial Burglary","Gambling","Investigate Person","Aggravated Assault","Simple Assault","Property Lost","Phone Call Complaints","Missing Person Reported","Burglary - No Property Taken","Arson","Firearm Discovery","Assembly or Gathering Violations","Police Service Incidents","Violations","Offenses Against Child / Family","Investigate Property"]),D="https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",O='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>';function I(e,t){var a=e.properties.OFFENSE_CODE_GROUP;return"Y"===e.properties.SHOOTING?u.marker(t,{icon:u.divIcon({className:"incident-marker"})}):u.circleMarker(t,{radius:4,color:b(a),weight:1,opacity:.5,fillOpacity:.25})}function R(e,t){var a=Object.keys(e.properties).filter((function(e){return!e.startsWith("_")})).map((function(t){return"<tr><th>".concat(t.replace(/_/g," "),"</th><td>").concat(e.properties[t],"<td></tr>")}));t.bindPopup("<table><tbody>".concat(a,"</tbody></table>"))}function A(e){var t=e.latLong,a=e.startDate,o=e.endDate,i=e.updateInterval,s=void 0===i?6e4:i,l=Object(n.useState)([]),u=Object(c.a)(l,2),f=u[0],E=u[1];return Object(n.useEffect)((function(){var e=function(){(function(e){var t=e.startDate,a=e.endDate,n='SELECT * from "12cb3883-56f5-47de-afa5-3b1cf61b257b" WHERE "OCCURRED_ON_DATE" BETWEEN \''.concat(t.format(g),"' and '").concat(a.format(g),"'");return fetch(h+n).then((function(e){return e.json()})).then((function(e){return v.a.parse(e.result.records,{Point:["Lat","Long"]})}))})({startDate:a,endDate:o}).then((function(e){E(e)}))};e();var t=setInterval(e,s);return function(){return clearInterval(t)}}),[a,o,s]),r.a.createElement("div",{className:"map-root"},r.a.createElement(d.a,{center:t,zoom:13},r.a.createElement(m.a,{url:D,attribution:O}),r.a.createElement(p.a,{key:Math.random(),data:f,pointToLayer:I,onEachFeature:R})))}var N=a(38),T=a.n(N),C=(a(115),{value:1,unit:"day"}),P=[{value:1,unit:"hour"},C,{value:7,unit:"days"},{value:30,unit:"days"},{value:3,unit:"months"},{value:6,unit:"months"},{value:1,unit:"year"}];function w(e){var t=e.timeframe,a=e.endDate,n=e.onChange,o=P.findIndex((function(e){return T()(e,t)}));return r.a.createElement("div",{className:"map-controls"},r.a.createElement("div",{className:"timeframe-picker"},r.a.createElement("span",null,"Timeframe (ending ".concat(a.format("MM-DD-YY"),"):")),r.a.createElement("select",{className:"timeframe-picker__selector",value:o,onChange:function(e){return n(P[e.target.value])}},P.map((function(e,t){var a=e.value,n=e.unit;return r.a.createElement("option",{key:"timeframe-".concat(t),value:t},"".concat(a," ").concat(n))})))))}a(116);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement((function(){var e=Object(n.useState)(C),t=Object(c.a)(e,2),a=t[0],o=t[1],i=function(e){var t=e.timeframe,a=e.endDate,n=void 0===a?l()():a,r=t.value,o=t.unit;return{startDate:l()(n).subtract(r,o),endDate:n}}({timeframe:a,endDate:l()("2019-09-20")}),s=i.startDate,u=i.endDate;return r.a.createElement("div",{id:"app-root"},r.a.createElement(w,{timeframe:a,endDate:u,onChange:function(e){return o(e)}}),r.a.createElement(A,{latLong:[42.3,-71.0589],startDate:s,endDate:u}))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},39:function(e,t,a){e.exports=a(117)},44:function(e,t,a){}},[[39,1,2]]]);
//# sourceMappingURL=main.d597f2cf.chunk.js.map