(window["webpackJsonpbos-criminal-incidence"]=window["webpackJsonpbos-criminal-incidence"]||[]).push([[0],{117:function(e,t,a){},118:function(e,t,a){},119:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(34),i=a.n(o),c=a(17),s=a(8),l=a.n(s),u=a(1),d=a.n(u),m=a(35),p=a.n(m),f=a(123),E=a(125),v=a(124),h=a(127),g=a(126),y=Object(h.a)(g.a).domain(["Firearm Violations","Confidence Games","Larceny From Motor Vehicle","Towed","Property Related Damage","Missing Person Located","Auto Theft Recovery","INVESTIGATE PERSON","Harbor Related Incidents","Service","Harassment","Landlord / Tenant Disputes","Property Found","HUMAN TRAFFICKING","Vandalism","License Violation","Robbery","License Plate Related Incidents","Counterfeiting","Warrant Arrests","Disorderly Conduct","Motor Vehicle Accident Response","Biological Threat","Embezzlement","Ballistics","Prisoner Related Incidents","Other Burglary","Verbal Disputes","Auto Theft","Medical Assistance","Restraining Order Violations","Manslaughter","Larceny","Evading Fare","Aircraft","Drug Violation","Bomb Hoax","Fire Related Reports","HUMAN TRAFFICKING - INVOLUNTARY SERVITUDE","Criminal Harassment","HOME INVASION","Search Warrants","Homicide","Fraud","Prostitution","Explosives","Residential Burglary","Operating Under the Influence","Recovered Stolen Property","Other","Liquor Violation","Commercial Burglary","Gambling","Investigate Person","Aggravated Assault","Simple Assault","Property Lost","Phone Call Complaints","Missing Person Reported","Burglary - No Property Taken","Arson","Firearm Discovery","Assembly or Gathering Violations","Police Service Incidents","Violations","Offenses Against Child / Family","Investigate Property"]);a(45);function D(e){var t=e.incidents,a=t.features?t.features.sort((function(e,t){return l()(t.properties.OCCURRED_ON_DATE).diff(l()(e.properties.OCCURRED_ON_DATE))})).map((function(e){return r.a.createElement("details",null,r.a.createElement("summary",null,r.a.createElement("div",{className:"incident-dot",style:{backgroundColor:y(e.properties.OFFENSE_CODE_GROUP)}}),e.properties.INCIDENT_NUMBER,"(",e.properties.OCCURRED_ON_DATE,")"),JSON.stringify(e.properties))})):"No results.";return r.a.createElement("div",{className:"incident-feed"},t.features?"".concat(t.features.length," results"):null,a)}a(46);var O=a(36),b=a.n(O),N="https://cors-anywhere.herokuapp.com/https://data.boston.gov/api/3/action/datastore_search_sql?sql=",R="YYYY-MM-DD hh:mm";var C="https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",I='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>';function A(e,t){var a=e.properties.OFFENSE_CODE_GROUP;return"Y"===e.properties.SHOOTING?d.a.marker(t,{icon:d.a.divIcon({className:"incident-marker"})}):d.a.circleMarker(t,{radius:4,color:y(a),weight:1,opacity:.5,fillOpacity:.25})}function T(e,t){var a=Object.keys(e.properties).filter((function(e){return!e.startsWith("_")})).map((function(t){return"<tr><th>".concat(t.replace(/_/g," "),"</th><td>").concat(e.properties[t],"<td></tr>")}));t.bindPopup("<table><tbody>".concat(a,"</tbody></table>"))}function _(e){var t=e.latLong,a=e.startDate,o=e.endDate,i=e.updateInterval,s=void 0===i?6e4:i,l=Object(n.useState)([]),u=Object(c.a)(l,2),d=u[0],m=u[1];return Object(n.useEffect)((function(){var e=function(){(function(e){var t=e.startDate,a=e.endDate,n='SELECT * from "12cb3883-56f5-47de-afa5-3b1cf61b257b" WHERE "OCCURRED_ON_DATE" BETWEEN \''.concat(t.format(R),"' and '").concat(a.format(R),"'");return fetch(N+n).then((function(e){return e.json()})).then((function(e){return b.a.parse(e.result.records,{Point:["Lat","Long"]})}))})({startDate:a,endDate:o}).then((function(e){m(e)}))};e();var t=setInterval(e,s);return function(){return clearInterval(t)}}),[a,o,s]),r.a.createElement("div",{className:"map-root"},r.a.createElement(D,{incidents:d}),r.a.createElement(f.a,{center:t,zoom:13},r.a.createElement(E.a,{url:C,attribution:I}),r.a.createElement(v.a,{key:p()(d),data:d,pointToLayer:A,onEachFeature:T})))}var P=a(39),w=a.n(P),F=(a(117),{value:1,unit:"day"}),S=[{value:1,unit:"hour"},F,{value:7,unit:"days"}];function k(e){var t=e.timeframe,a=e.endDate,n=e.onChange,o=S.findIndex((function(e){return w()(e,t)}));return r.a.createElement("div",{className:"map-controls"},r.a.createElement("div",{className:"timeframe-picker"},r.a.createElement("span",null,"Timeframe (ending ".concat(a.format("MM-DD-YY"),"):")),r.a.createElement("select",{className:"timeframe-picker__selector",value:o,onChange:function(e){return n(S[e.target.value])}},S.map((function(e,t){var a=e.value,n=e.unit;return r.a.createElement("option",{key:"timeframe-".concat(t),value:t},"".concat(a," ").concat(n))})))))}a(118);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement((function(){var e=Object(n.useState)(F),t=Object(c.a)(e,2),a=t[0],o=t[1],i=function(e){var t=e.timeframe,a=e.endDate,n=void 0===a?l()():a,r=t.value,o=t.unit;return{startDate:l()(n).subtract(r,o),endDate:n}}({timeframe:a,endDate:l()("2019-09-20")}),s=i.startDate,u=i.endDate;return r.a.createElement("div",{id:"app-root"},r.a.createElement(k,{timeframe:a,endDate:u,onChange:function(e){return o(e)}}),r.a.createElement(_,{latLong:[42.3,-71.0589],startDate:s,endDate:u}))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},40:function(e,t,a){e.exports=a(119)},45:function(e,t,a){},46:function(e,t,a){}},[[40,1,2]]]);
//# sourceMappingURL=main.d1f89ae8.chunk.js.map